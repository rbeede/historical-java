
  

  
  

  
  

  

  
  

  
  

  
  

  

  

  

  

  

  
  
  
  
      
  

      
      
      
      
      
      
        
         
      
      

      
      
      
      

      
      
      

      

  
  

  
  

   
   

   
   


    
	
	

    
    
      
	
	
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html>
      <head>
        
        
        
          <title>HttpClient - 
          Character Encodings
        </title>
        
        
        <style type="text/css">
          @import url("./style/tigris.css");
          @import url("./style/maven.css");
        </style>
        
        
        
        
        
        <link rel="stylesheet" href="./style/print.css" type="text/css" media="print"></link>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
        
          <meta name="author" content="Adrian Sutton"></meta>
          <meta name="email" content="adrian@ephox.com"></meta>
        
          <meta name="author" content="Jeff Dever"></meta>
          <meta name="email" content="jsdever@apache.org"></meta>
        
        
        
        
      </head>

      <body class="composite">

        <div id="banner">
          <table border="0" width="100%" cellpadding="8" cellspacing="0">
            <tr>
              
              <td>
                
                
                  
                  
                  
                    
                  
                  
                  
                  
                  
                  <a href="http://jakarta.apache.org/">
                    <img border="0" alt="Apache Software Foundation" src="http://jakarta.apache.org/commons/images/jakarta-logo-blue.gif" align="left"></img>
                  </a>
                
              </td>

              
              <td>
                <div id="login" align="right">
                  
                  
                    
                    
                    
                      
                    

                    <a href="http://jakarta.apache.org/commons/httpclient/">
                      <img border="0" alt="HttpClient" src="./images/httpclient_logo.png" align="right"></img>
                    </a>
                  
                </div>
              </td>
            </tr>
          </table>
        </div>
        <div id="breadcrumbs">
          <table border="0" width="100%" cellpadding="4" cellspacing="0">
            <tr>
              
                
                <td>Last published: 13 October 2003
                  | Doc for 2.0-rc2
                </td>
              
              <td>
                <div align="right">
                  
                  
                  
                  
                    
                  
                </div>
              </td>
            </tr>
          </table>
        </div>
        
        <table border="0" width="100%" cellpadding="8" cellspacing="0"> 
          <tr valign="top">
            <td width="20%" id="leftcol">
              <div id="navcolumn">
                

                
                  
    <div>
      <strong>Overview</strong>
      
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="features.html"><img class="handle" src="./images/none.png" alt=""></img>Features</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="news.html"><img class="handle" src="./images/none.png" alt=""></img>News</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="status.html"><img class="handle" src="./images/none.png" alt=""></img>Status</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="downloads.html"><img class="handle" src="./images/none.png" alt=""></img>Download</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="applications.html"><img class="handle" src="./images/none.png" alt=""></img>Applications</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		
          
		
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="userguide.html"><img class="handle" src="./images/expanded.png" alt=""></img>User Guide</a>
      	
      </small>
	  
        
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="authentication.html"><img class="handle" src="./images/none.png" alt=""></img>Authentication Guide</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      		<b><a href="charencodings.html"><img class="handle" src="./images/none.png" alt=""></img>Character Encodings</a></b>
      	
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="cookies.html"><img class="handle" src="./images/none.png" alt=""></img>Cookies</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="redirects.html"><img class="handle" src="./images/none.png" alt=""></img>Cross Host Redirects</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="logging.html"><img class="handle" src="./images/none.png" alt=""></img>Logging Guide</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="methods.html"><img class="handle" src="./images/none.png" alt=""></img>Methods</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="http://cvs.apache.org/viewcvs.cgi/jakarta-commons/httpclient/src/examples/"><img class="handle" src="./images/none.png" alt=""></img>Sample Code</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="sslguide.html"><img class="handle" src="./images/none.png" alt=""></img>SSL Guide</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="threading.html"><img class="handle" src="./images/none.png" alt=""></img>Threading</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="troubleshooting.html"><img class="handle" src="./images/none.png" alt=""></img>Trouble Shooting</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="tutorial.html"><img class="handle" src="./images/none.png" alt=""></img>Tutorial</a>
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    
    
    
    
	
	
	
	
	
		
          
		
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="developerguide.html"><img class="handle" src="./images/expanded.png" alt=""></img>Developer Guide</a>
      	
      </small>
	  
        
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="releases.html"><img class="handle" src="./images/none.png" alt=""></img>Release Process</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="testwebapp.html"><img class="handle" src="./images/none.png" alt=""></img>Webapp Test Guide</a>
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    </div>
  
                

				
    <div>
      <strong>Project Documentation</strong>
      
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="index.html"><img class="handle" src="./images/none.png" alt=""></img>About HttpClient</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		
		
          
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="project-info.html"><img class="handle" src="./images/collapsed.png" alt=""></img>Project Info</a>
      	
      </small>
	  
    </div>
  
    
    
    
    
	
	
	
	
	
		
		
          
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="maven-reports.html"><img class="handle" src="./images/collapsed.png" alt=""></img>Project Reports</a>
      	
      </small>
	  
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="apidocs/index.html"><img class="handle" src="./images/none.png" alt=""></img>JavaDocs</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="xref/index.html"><img class="handle" src="./images/none.png" alt=""></img>Source XReference</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="xref-test/index.html"><img class="handle" src="./images/none.png" alt=""></img>Test XReference</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="http://maven.apache.org/development-process.html"><img class="handle" src="./images/none.png" alt=""></img>Development Process</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
                
                
                

                
                
                
                
                	<div style="margin-top: 20px; width: 100%; text-align: center;">
                		<a href="http://maven.apache.org/" title="Powered by Maven"><img style="border: 1px solid black" alt="Powered by Maven" src="./images/logos/maven-propaganda.png"></img></a>
                	</div>
                
              
                
              </div>
            </td>
            <td rowspan="2">
              <div id="bodycol">
                
                <div class="app">
                  
                  
    <div class="h3">
      
      
        <h3>
          <a name="Introduction">Introduction</a>
        </h3>
      
      
    <p>
      
     This document provides an overview of how HttpClient handles character
   
     
      encodings and how to use HttpClient in an encoding safe way.  There are
   
     
      three main sections: 
   
     
      
   
    <a href="#HTTP Headers">
     HTTP Headers
   </a>
  
     , 
   
     
      
   
    <a href="#Request/Response Body">
     Request/Response Body
   </a>
  
      and 
   
     
      
   
    <a href="#URLs">
     URLs
   </a>
  
     .
   
     
      
   
    </p>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="HTTP Headers">HTTP Headers</a>
        </h3>
      
      
    <p>
      
     The headers of a HTTP request or response must be in 
   
    <tt>
      
     US-ASCII
   
    </tt>
   
      format.
   
     
        It is not possible to use non 
   
    <tt>
      
     US-ASCII
   
    </tt>
   
      characters in the header of a
   
     
        request or response.  Generally this is not an issue however, because the
   
     
        HTTP headers are designed to facilite the transfer of data rather than to
   
     
        actually transfer the data itself.
   
    </p>
   
    <p>
      
     One exception however are cookies. Since cookies are transfered as HTTP Headers
   
     
        they are confined to the 
   
    <tt>
      
     US-ASCII
   
    </tt>
   
      character set. See the Cookie Guide
   
     
        for more information.
   
     
      
   
    </p>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="Request/Response Body">Request/Response Body</a>
        </h3>
      
      
    <p>
      
     The request or response body can be any encoding, but by default is
   
     
        
   
    <tt>
      
     ISO-8859-1
   
    </tt>
   
     .  The encoding may be specified in the 
   
     
        
   
    <tt>
      
     Content-Type
   
    </tt>
   
      header, for example:
   
     
        
   
    <blockquote>
      
     Content-Type: text/html; charset=UTF-8
   
    </blockquote>
   
     
      
   
    </p>
   
    <p>
      
     In this case the application should be careful to use UTF-8 encoding
   
     
      when converting the body to a String or some characters may be corrupt.
   
     
      You can set the content type header for a request with the
   
     
      
   
    <code>
      
     addRequestHeader
   
    </code>
   
      method in each method and retrieve the
   
     
      encoding for the response body with the 
   
    <code>
      
     getResponseCharSet
   
    </code>
   
     
      method.
   
    </p>
   
    <p>
      
     If the response is known to be a String, you can use the
   
     
      
   
    <code>
      
     getResponseBodyAsString
   
    </code>
   
      method which will automatically use
   
     
      the encoding specified in the 
   
    <tt>
      
     Content-Type
   
    </tt>
   
      header or 
   
     
      
   
    <tt>
      
     ISO-8859-1
   
    </tt>
   
      if no charset is specified.
   
    </p>
   
    <p>
      
     Note that some document types, such as HTML and XML allow the author
   
     
      to specify the content type of the file.  In this case, you should
   
     
      consult the appropriate standards regarding how to resovle any conflicts
   
     
      in the reported charsets.
   
    </p>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="URLs">URLs</a>
        </h3>
      
      
    <p>
      
     The standard for URLs (
   
    <a href="http://www.ietf.org/rfc/rfc1738.txt">
     RFC1738
   </a>
  
     ) explictly
   
     
      states that URLs may only contain graphic printable characters of the
   
     
      
   
    <tt>
      
     US-ASCII
   
    </tt>
   
      coded character set and is defined in terms of octets.
   
     
      The octets 
   
    <code>
      
     80-FF
   
    </code>
   
      hexadecimal are not used in 
   
    <tt>
      
     US-ASCII
   
    </tt>
   
      and the octets
   
     
      
   
    <code>
      
     OO-1F
   
    </code>
   
      hexadecimal represent control characters; characters in these
   
     
      ranges must be encoded.
   
    </p>
   
    <p>
      
     Characters which cannot be represented by an 8-bit ASCII code, can not
   
     
      be used in an URL as there is no way to reliably encode them (the
   
     
      encoding scheme for URLs is based off of octets).  Despite this, some
   
     
      servers do support varying means of encoding double byte characters in
   
     
      URLs, the most common technique seems to be to use UTF-8 encoding and
   
     
      encode each octet separately even if a pair of octets represents one
   
     
      character.  This however, is not specified by the standard and is highly
   
     
      prone to error, so it is recommended that URLs be restricted to the 8-bit
   
     
      ASCII range.
   
    </p>
   
    </div>
  
                  
                  
                  
                  
                  
                </div>
              </div>
            </td>
          </tr>
        </table>
        <div id="footer">
          <table border="0" style="width:100%" cellpadding="4" cellspacing="0">
            
            <tr>
              <td>
                
                  
                    
                    
                      © 2001-2003, Apache Software Foundation
                    
                  
                  
                

                
              </td>
              
            </tr>
          </table>
        </div>
      </body>
    </html>
  