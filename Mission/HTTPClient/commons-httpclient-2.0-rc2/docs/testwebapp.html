
  

  
  

  
  

  

  
  

  
  

  
  

  

  

  

  

  

  
  
  
  
      
  

      
      
      
      
      
      
        
         
      
      

      
      
      
      

      
      
      

      

  
  

  
  

   
   

   
   


    
	
	

    
    
      
	
	
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html>
      <head>
        
        
        
          <title>HttpClient - 
          Webapp Test HowTo
        </title>
        
        
        <style type="text/css">
          @import url("./style/tigris.css");
          @import url("./style/maven.css");
        </style>
        
        
        
        
        
        <link rel="stylesheet" href="./style/print.css" type="text/css" media="print"></link>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
        
          <meta name="author" content="Oleg Kalnichevski"></meta>
          <meta name="email" content="olegk@apache.org"></meta>
        
          <meta name="author" content="Jeff Dever"></meta>
          <meta name="email" content="jsdever@apache.org"></meta>
        
        
        
        
      </head>

      <body class="composite">

        <div id="banner">
          <table border="0" width="100%" cellpadding="8" cellspacing="0">
            <tr>
              
              <td>
                
                
                  
                  
                  
                    
                  
                  
                  
                  
                  
                  <a href="http://jakarta.apache.org/">
                    <img border="0" alt="Apache Software Foundation" src="http://jakarta.apache.org/commons/images/jakarta-logo-blue.gif" align="left"></img>
                  </a>
                
              </td>

              
              <td>
                <div id="login" align="right">
                  
                  
                    
                    
                    
                      
                    

                    <a href="http://jakarta.apache.org/commons/httpclient/">
                      <img border="0" alt="HttpClient" src="./images/httpclient_logo.png" align="right"></img>
                    </a>
                  
                </div>
              </td>
            </tr>
          </table>
        </div>
        <div id="breadcrumbs">
          <table border="0" width="100%" cellpadding="4" cellspacing="0">
            <tr>
              
                
                <td>Last published: 13 October 2003
                  | Doc for 2.0-rc2
                </td>
              
              <td>
                <div align="right">
                  
                  
                  
                  
                    
                  
                </div>
              </td>
            </tr>
          </table>
        </div>
        
        <table border="0" width="100%" cellpadding="8" cellspacing="0"> 
          <tr valign="top">
            <td width="20%" id="leftcol">
              <div id="navcolumn">
                

                
                  
    <div>
      <strong>Overview</strong>
      
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="features.html"><img class="handle" src="./images/none.png" alt=""></img>Features</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="news.html"><img class="handle" src="./images/none.png" alt=""></img>News</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="status.html"><img class="handle" src="./images/none.png" alt=""></img>Status</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="downloads.html"><img class="handle" src="./images/none.png" alt=""></img>Download</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="applications.html"><img class="handle" src="./images/none.png" alt=""></img>Applications</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		
          
		
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="userguide.html"><img class="handle" src="./images/expanded.png" alt=""></img>User Guide</a>
      	
      </small>
	  
        
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="authentication.html"><img class="handle" src="./images/none.png" alt=""></img>Authentication Guide</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="charencodings.html"><img class="handle" src="./images/none.png" alt=""></img>Character Encodings</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="cookies.html"><img class="handle" src="./images/none.png" alt=""></img>Cookies</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="redirects.html"><img class="handle" src="./images/none.png" alt=""></img>Cross Host Redirects</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="logging.html"><img class="handle" src="./images/none.png" alt=""></img>Logging Guide</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="methods.html"><img class="handle" src="./images/none.png" alt=""></img>Methods</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="http://cvs.apache.org/viewcvs.cgi/jakarta-commons/httpclient/src/examples/"><img class="handle" src="./images/none.png" alt=""></img>Sample Code</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="sslguide.html"><img class="handle" src="./images/none.png" alt=""></img>SSL Guide</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="threading.html"><img class="handle" src="./images/none.png" alt=""></img>Threading</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="troubleshooting.html"><img class="handle" src="./images/none.png" alt=""></img>Trouble Shooting</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="tutorial.html"><img class="handle" src="./images/none.png" alt=""></img>Tutorial</a>
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    
    
    
    
	
	
	
	
	
		
          
		
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="developerguide.html"><img class="handle" src="./images/expanded.png" alt=""></img>Developer Guide</a>
      	
      </small>
	  
        
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="releases.html"><img class="handle" src="./images/none.png" alt=""></img>Release Process</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      		<b><a href="testwebapp.html"><img class="handle" src="./images/none.png" alt=""></img>Webapp Test Guide</a></b>
      	
      	
      </small>
	  
        
      
    </div>
  
      
    </div>
  
    </div>
  
                

				
    <div>
      <strong>Project Documentation</strong>
      
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="index.html"><img class="handle" src="./images/none.png" alt=""></img>About HttpClient</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		
		
          
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="project-info.html"><img class="handle" src="./images/collapsed.png" alt=""></img>Project Info</a>
      	
      </small>
	  
    </div>
  
    
    
    
    
	
	
	
	
	
		
		
          
		
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="maven-reports.html"><img class="handle" src="./images/collapsed.png" alt=""></img>Project Reports</a>
      	
      </small>
	  
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="apidocs/index.html"><img class="handle" src="./images/none.png" alt=""></img>JavaDocs</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="xref/index.html"><img class="handle" src="./images/none.png" alt=""></img>Source XReference</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="xref-test/index.html"><img class="handle" src="./images/none.png" alt=""></img>Test XReference</a>
      	
      </small>
	  
        
      
    </div>
  
    
    
    
    
	
	
	
	
	
		   
	
    <div>
      <small>
      	
      	
      		<a href="http://maven.apache.org/development-process.html"><img class="handle" src="./images/none.png" alt=""></img>Development Process</a>
      	
      </small>
	  
        
      
    </div>
  
    </div>
  
                
                
                

                
                
                
                
                	<div style="margin-top: 20px; width: 100%; text-align: center;">
                		<a href="http://maven.apache.org/" title="Powered by Maven"><img style="border: 1px solid black" alt="Powered by Maven" src="./images/logos/maven-propaganda.png"></img></a>
                	</div>
                
              
                
              </div>
            </td>
            <td rowspan="2">
              <div id="bodycol">
                
                <div class="app">
                  
                  
    <div class="h3">
      
      
        <h3>
          <a name="Rationale">Rationale</a>
        </h3>
      
      
    <p>
      
     Complex software development efforts
   
     
        with many developers collaborating on the same code base require a
   
     
        means of ensuring that changes introduced in one module do not
   
     
        produce a rippling effect on other modules by breaking some
   
     
        dependencies or assumptions. One of the widely employed approaches to
   
     
        achieve such goal calls for simultaneous development of software
   
     
        units and corresponding test cases. The latter can be executed
   
     
        against the former in order to ensure that the software units comply
   
     
        with their contract or programming interface. Such suite of test
   
     
        cases helps developers ensure formal validity and integrity of the
   
     
        their software artifact while it evolves through multiple development
   
     
        cycles.
   
     
      
   
    </p>
   
    <p>
      
     JUnit, a popular open-source unit
   
     
        testing framework, has been employed in the HttpClient project.
   
     
        Please refer to the JUnit web site for more detailed information
   
     
        
   
    <A HREF="http://www.junit.org/index.htm">
      
     http://www.junit.org/index.htm
   
    </A>
   
     
      
   
    </p>
   
    <p>
      
     Different types of unit tests in the HttpClient project
   
     
        
   
    <ul>
      
     
          
   
    <li>
      
     Test cases that have no external dependencies in order to
   
     
            execute;
   
    </li>
   
     
          
   
    <li>
      
     Test cases that require access to external public resources
   
     
            (usually high profile web sites);
   
    </li>
   
     
          
   
    <li>
      
     Test cases that must be run against a local web application
   
     
            that implements test specific functions and produces specific HTTP
   
     
            responses. These tests are the most critical component of the entire
   
     
            test suite as they allow for testing of most arcane aspects of the
   
     
        
   
         HTTP protocol that are not easily reproducible with external
   
     
            resources.
   
    </li>
   
     
        
   
    </ul>
   
     
      
   
    </p>
   
    <p>
      
     It is absolutely crucial that patches
   
     
        are tested for compliance with the entire test  suite in order to be
   
     
        considered for acceptance into the main CVS trunk
   
    </p>
   
    <p>
      
     The purpose of this document is to help
   
     
        potential HttpClient contributors compile and deploy the test web
   
     
        application (later referred as Test WebApp)
   
    </p>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="Test WebApp external dependencies">Test WebApp external dependencies</a>
        </h3>
      
      
    <p>
      
     In order to successfully compile the
   
     
        Test WebApp we need satisfy the following external dependencies 
   
     
      
   
    </p>
   
    <ul>
      
     
        
   
    <li>
      
    <a HREF="http://jakarta.apache.org/tomcat/">
     Apache Jakarta Tomcat
   </a>
  
    <br>
      
    </br>
   
      
   
     
          servlet engine version 4.0.3 or higher.  Technically any Servlet 2.3 and JSP
   
     
          1.2 compliant servlet engine should do. However, the Test WebApp has
   
     
          been mostly used with Tomcat servlet engine.
   
     
          If you need assistance in deploying the Tomcat servlet engine please refer to this 
   
     
          
   
    <a HREF="http://jakarta.apache.org/tomcat/tomcat-4.0-doc/RUNNING.txt">
     document
   </a>
  
     
        
   
    </li>
   
     

        
   
    <li>
      
    <a HREF="http://jakarta.apache.org/ant/index.html">
     Apache Jakarta Ant
   </a>
  
    <br>
      
    </br>
   
     
          build tool version 1.5.1 or higher
   
     
        
   
    </li>
   
     

        
   
    <li>
      
    <a HREF="http://www.junit.org/index.htm">
     JUnit
   </a>
  
    <br>
      
    </br>
   
     
          unit testing framework version 3.7 or higher
   
     
        
   
    </li>
   
     

        
   
    <li>
      
    <a href="http://java.sun.com/products/jsse/">
     Java
   
    <sup>
      
     TM
   
    </sup>
   
      Secure Socket Extension (JSSE)
   </a>
  
    <br>
      
    </br>
   
     
          version 1.0.3 or higher
   
     
        
   
    </li>
   
     

      
   
    </ul>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="Development environment">Development environment</a>
        </h3>
      
      
    <p>
      
     HttpClient is a Java based framework and so is not tied to any particular platform.
   
     
        However setup instructions such as these must choose a particular enviroment
   
     
        to describe.  This document will describe the setup for j2sdk1.4 on Unix.
   
     
      
   
    </p>
   
    <ol>
      
     
        
   
    <li>
      
     Specify Test WebA
   
     pp build properties
   
     
          
   
    <p>
      
     
            Update references in the file
   
     
            build.properties to refer to correct locations on your local system.
   
     
            The  build.properties is located in the root directory of the
   
     
            HttpClient source tree. Most importantly the location of the
   
     
            following packages must be specified: 
   
    <b>
      
     junit.jar, servlet.jar
   
    </b>
   
    </p>
   
     
          
   
    <p>
      
     
            For example, you can copy the build.properties.sample to your home directory 
   
     
            as build.properties and modify the following lines to match your system configuration:
   
    </p>
   
     

          
   
    <ul>
      
     
            
   
    <li>
      
     servlet.jar=/usr/local/jakarta-tomcat/common/lib/servlet.jar
   
    </li>
   
     
            
   
    <li>
      
     junit.jar=/usr/local/junit/junit.jar
   
    </li>
   
     
          
   
    </ul>
   
     
        
   
    </li>
   
     
      
   
    </ol>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="Build Test WebApp">Build Test WebApp</a>
        </h3>
      
      
    <p>
      
     
        From the root directory of the HttpClient source tree, run the following
   
     
        command:
   
     
        
   
    <blockquote>
      
     /opt/ant test-webapp-war
   
    </blockquote>
   
     
      
   
    </p>
   
    <p>
      
     If all external dependencies have been
   
     
        correctly specified the execution of the Ant task should result in
   
     
        creation of web archive target/httpclienttest.war.
   
     
      
   
    </p>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="Deploy Test WebApp">Deploy Test WebApp</a>
        </h3>
      
      
    <ul>
      
     
        
   
    <li>
      
     Shutdown Tomcat 
   
     
          
   
    <p>
      
     Run the shutdown script: 
   
    <tt>
      
     /usr/local/jakarta-tomcat/bin/shutdown.sh
   
    </tt>
   
    </p>
   
     
        
   
    </li>
   
     
        
   
    <li>
      
     Copy the httpclienttest.war file into the webapps directory
   
     
          
   
    <p>
      
     Your tomcat installations webapp directory might be in either
   
     
            /var/tomcat/webapps or /usr/local/jakarta-tomcat/webapps.
   
     
          
   
    </p>
   
     
          
   
    <p>
      
    <b>
      
     Note:
   
    </b>
   
      You can control where ant 
   
    <tt>
      
     test-webapp-war
   
    </tt>
   
      target puts the
   
     
            generated 
   
    <tt>
      
     httpclienttest.war
   
    </tt>
   
      file by modifying the 
   
    <tt>
      
     test-webapp.dest
   
    </tt>
   
     
            property.  This can be set to create the war file in the tomcat 
   
     
            webapps directory so you can skip this manual step.
   
     
          
   
    </p>
   
     
        
   
    </li>
   
     
        
   
    <li>
      
     Startup Tomcap
   
     
       
   
        
   
    <p>
      
     Run the startup script: /usr/local/jakarta-tomcat/bin/shutdown.sh
   
     
          
   
    </p>
   
     
          
   
    <p>
      
     Tomcat will check for new web archives in its base directory and 
   
     
            automatically deploy them.
   
     
          
   
    </p>
   
     
        
   
    </li>
   
     
        
   
    <li>
      
     Test the deployment of the httpclienttest web archive
   
     
          
   
    <p>
      
     Point your browser to the following
   
     
            URL: 
   
    <A HREF="http://127.0.0.1:8080/httpclienttest/headers">
      
     
              http://127.0.0.1:8080/httpclienttest/headers
   
    </A>
   
     
          
   
    </p>
   
     
          
   
    <p>
      
     If the Test WebApp has been
   
     
            properly deployed and is ready for use you should see similar
   
     
            response in your browser
   
    </p>
   
     


          
   
    <p>
      
     This is a response to an HTTP GET request.
   
    <br>
      
    </br>
   
     
            
   
    <blockquote>
      
     
              Request Headers:
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     user-agent
   
     "
   
     ;value=
   
     "
   
     Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.3a) Phoenix/0.5
   
     "
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     accept
   
     "
   
     ;value=
   
     "
   
     text/xml,application/xml,application/xhtml+xml,text/html
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     accept-language
   
     "
   
     ;value=
   
     "
   
     en-us,en;q=0.5
   
     "
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     accept-encoding
   
     "
   
     ;value=
   
     "
   
     gzip,deflate,compress;q=0.9
   
     "
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     accept-charset
   
     "
   
     ;value=
   
     "
   
     ISO-8859-1,utf-8;q=0.7,*;q=0.7
   
     "
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     keep-alive
   
     "
   
     ;value=
   
     "
   
     300
   
     "
   
    <br>
      
    </br>
   
     
              name=
   
     "
   
     connection
   
     "
   
     ;value=
   
     "
   
     keep-alive
   
     "
   
    <br>
      
    </br>
   
     
            
   
    </blockquote>
   
     
          
   
    </p>
   
     
        
   
    </li>
   
     
      
   
    </ul>
   
    </div>
  
    <div class="h3">
      
      
        <h3>
          <a name="Run test cases">Run test cases</a>
        </h3>
      
      
    <p>
      
     In case you run a non-default installation of the Tomcat servlet
   
     
        engine you may need to update the following properties in the
   
     
        build.properties file
   
    </p>
   
    <ul>
      
     
        
   
    <li>
      
     httpclient.test.localHost
   
    </li>
   
     
        
   
    <li>
      
     httpclient.test.localPort
   
    </li>
   
     
        
   
    <li>
      
     httpclient.test.webappContext
   
    </li>
   
     
      
   
    </ul>
   
    <p>
      
     run the webapp tests using Ant:
   
    <br>
      
    </br>
   
     
        
   
    <code>
      
     ant test-local
   
    </code>
   
      
   
     
      
   
    </p>
   
    <p>
      
     You should receive BUILD SUCCESSFUL message i
   
     f all test cases succeeded
   
    </p>
   
    <p>
      
     Disregard WARN messages. The test cases run through valid and invalid cases and as such 
   
     
        warnings are part of the HttpClient test sequence.
   
    </p>
   
    </div>
  
                  
                  
                  
                  
                  
                </div>
              </div>
            </td>
          </tr>
        </table>
        <div id="footer">
          <table border="0" style="width:100%" cellpadding="4" cellspacing="0">
            
            <tr>
              <td>
                
                  
                    
                    
                      © 2001-2003, Apache Software Foundation
                    
                  
                  
                

                
              </td>
              
            </tr>
          </table>
        </div>
      </body>
    </html>
  